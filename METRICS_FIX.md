# üìä –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üéØ –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

### 1. **–ù–µ—Ç–æ—á–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Ç–µ—Å—Ç–æ–≤**
**–ë—ã–ª–æ**: –°—á–∏—Ç–∞–ª–∏—Å—å –¥–Ω–∏ —Å –æ—Ç–≤–µ—Ç–∞–º–∏, –∞ –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
**–°—Ç–∞–ª–æ**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É + –¥–∞—Ç–∞ = –æ–¥–∏–Ω —Ç–µ—Å—Ç

### 2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ—Ä–∏–∏ (streak)**
**–ë—ã–ª–æ**: –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 7 –¥–Ω–µ–π
**–°—Ç–∞–ª–æ**: –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥—Å—á–µ—Ç–∞ –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥

### 3. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ XP –∏ —É—Ä–æ–≤–Ω–∏**
**–ë—ã–ª–æ**: –î–∞–Ω–Ω—ã–µ –∏–∑ store –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤
**–°—Ç–∞–ª–æ**: –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –±–∞–∑—ã + –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ—Ä–∏–π –≤ –¥–∞—à–±–æ—Ä–¥–µ**
**–ë—ã–ª–æ**: –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ "–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è"
**–°—Ç–∞–ª–æ**: –ö–∞—Ä—Ç–æ—á–∫–∞ —Å —Ç–µ–∫—É—â–µ–π –∏ –ª—É—á—à–µ–π —Å–µ—Ä–∏–µ–π

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### üìà **–¢–æ—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤**
```typescript
// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç—ã –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É –∏ –¥–∞—Ç–µ
const testSessions = userAnswers.reduce((acc, answer) => {
  const dateKey = answer.createdAt.toDateString()
  const subjectKey = answer.question.subject.id
  const sessionKey = `${dateKey}-${subjectKey}`
  // –û–¥–∏–Ω —Ç–µ—Å—Ç = –æ–¥–∏–Ω –ø—Ä–µ–¥–º–µ—Ç –≤ –æ–¥–∏–Ω –¥–µ–Ω—å
}, {})
```

### üî• **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Å–µ—Ä–∏–π**
```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–Ω–∏ –ø–æ–¥—Ä—è–¥ —Å —Ç–µ—Å—Ç–∞–º–∏
let currentStreak = 0
if (testDates.includes(today) || testDates.includes(yesterday)) {
  // –°—á–∏—Ç–∞–µ–º –¥–Ω–∏ –ø–æ–¥—Ä—è–¥ –Ω–∞–∑–∞–¥ –æ—Ç —Å–µ–≥–æ–¥–Ω—è/–≤—á–µ—Ä–∞
}
```

### üíé **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ XP –∏ —É—Ä–æ–≤–Ω–∏**
- –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å store

### üìä **–ù–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ**
- **–¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è**: –¥–Ω–∏ –ø–æ–¥—Ä—è–¥ —Å —Ç–µ—Å—Ç–∞–º–∏
- **–õ—É—á—à–∞—è —Å–µ—Ä–∏—è**: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–µ—Ä–∏—è –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è
- **–ê–∫—Ç—É–∞–ª—å–Ω—ã–µ XP/—É—Ä–æ–≤–µ–Ω—å**: –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–¢–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤**: —Ä–µ–∞–ª—å–Ω—ã–µ —Å–µ—Å—Å–∏–∏

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

### API `/api/user/stats` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{
  "totalTests": 3,           // –†–µ–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã (–ø—Ä–µ–¥–º–µ—Ç+–¥–∞—Ç–∞)
  "correctAnswers": 12,      // –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
  "totalAnswers": 15,        // –í—Å–µ–≥–æ –æ—Ç–≤–µ—Ç–æ–≤
  "averageScore": 80,        // –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª
  "currentStreak": 2,        // –¢–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è –¥–Ω–µ–π
  "longestStreak": 5,        // –õ—É—á—à–∞—è —Å–µ—Ä–∏—è
  "currentXp": 120,          // –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ XP
  "currentLevel": 2,         // –ê–∫—Ç—É–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
  "subjectProgress": [...],  // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º
  "recentBadges": [...]      // –ü–æ—Å–ª–µ–¥–Ω–∏–µ –±–µ–π–¥–∂–∏
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞:
1. –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è ‚Üí API `/api/test/submit`
2. –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç–≤–µ—Ç—ã ‚Üí –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è XP/—É—Ä–æ–≤–µ–Ω—å
3. –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è store
4. –î–∞—à–±–æ—Ä–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞:
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ XP/—É—Ä–æ–≤–Ω—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è store
- –î–∞–Ω–Ω—ã–µ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå –ù–µ—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ—Ä–∏–∏
- ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ XP/—É—Ä–æ–≤–Ω–∏
- ‚ùå –°—Ç–∞—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –¢–æ—á–Ω—ã–π –ø–æ–¥—Å—á–µ—Ç —Ç–µ—Å—Ç–æ–≤ –ø–æ —Å–µ—Å—Å–∏—è–º
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ—Ä–∏–∏ –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥
- ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ XP/—É—Ä–æ–≤–Ω–∏ –∏–∑ –ë–î
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

## üöÄ **–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. **–ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç** ‚Üí XP –∏ —É—Ä–æ–≤–µ–Ω—å –æ–±–Ω–æ–≤—è—Ç—Å—è
2. **–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –¥–∞—à–±–æ—Ä–¥** ‚Üí –£–≤–∏–¥–∏—Ç–µ –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
3. **–ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç –≤ –¥—Ä—É–≥–æ–π –¥–µ–Ω—å** ‚Üí –°–µ—Ä–∏—è —É–≤–µ–ª–∏—á–∏—Ç—Å—è
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API** ‚Üí `curl http://localhost:3001/api/user/stats`

**–¢–µ–ø–µ—Ä—å –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏! üìä‚ú®**